function EnviarTicketAbono(e,o,n){var r=!1;Swal.fire({html:'\n        <div class="container">\n        <h3>Enviar correo del recibo</h3>\n            <div class="row">\n            <div class="col-12 col-md-12">\n                <span>Porfavor, selecciona un correo</span>\n                <select class="form-control" id="correo-cliente">\n                </select>\n            </div>\n            </div>\n        </div>\n        ',didRender:function(){var e={id:o,tabla:"clientes",relacion:!0,tablas_relacionadas:{"01":{nombre:"detalle_correo"}}};fetch("../servidor/database/traer-un-solo-dato.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{sel_correo=$("#correo-cliente"),sel_correo.empty(),r=e.data.nombre,e.detalle_correo.length>0?e.detalle_correo.forEach((e=>{sel_correo.append(`<option value="${e.correo}">${e.correo}</option`)})):sel_correo.append('<option value="null">Sin correos</option')}))},confirmButtonText:"Enviar"}).then((n=>{if(n.isConfirmed){let n=document.getElementById("correo-cliente").value;Swal.fire({timer:3e3,html:'\n                <div class="container">\n                <div class="row justify-content-center">\n                    <dotlottie-player src="https://assets7.lottiefiles.com/packages/lf20_xumyfzqp.json" background="transparent"  speed="1"  style="width: 150px; height: 150px;" loop autoplay></dotlottie-player></br>\n                </div>\n                <span>Enviando correo...</span>\n                </div>\n                ',showConfirmButton:!1}).then((t=>{var a={id_doc:e,prefix:"TICKET",path:"../../static/docs/C"+o};fetch("../servidor/database/validar-documentos.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((t=>{console.log(t),t.estatus?$.ajax({type:"POST",url:"../servidor/correo/enviar-correo-ticket.php",data:{nombre_cliente:r,correo_cliente:n,cliente_id:o,abono_id:e},dataType:"JSON",success:function(e){0==e.estatus?Swal.fire({icon:"error",html:`<h3>${e.mensaje}</h3>`}):Swal.fire({icon:"success",html:`<h3>${e.mensaje}</h3>`})}}).fail((function(){alert("Error al mandar correo!!")})):guardarTicketAbono(e)}))}))}}))}function EnviarContrato(e,o,n){var r=!1;Swal.fire({html:'\n        <div class="container">\n        <h3>Enviar correo del contrato</h3>\n            <div class="row">\n            <div class="col-12 col-md-12">\n                <span>Porfavor, selecciona un correo</span>\n                <select class="form-control" id="correo-cliente">\n                </select>\n            </div>\n            </div>\n        </div>\n        ',didRender:function(){var e={id:o,tabla:"clientes",relacion:!0,tablas_relacionadas:{"01":{nombre:"detalle_correo"}}};fetch("../servidor/database/traer-un-solo-dato.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{sel_correo=$("#correo-cliente"),sel_correo.empty(),r=e.data.nombre,e.detalle_correo.length>0?e.detalle_correo.forEach((e=>{sel_correo.append(`<option value="${e.correo}">${e.correo}</option`)})):sel_correo.append('<option value="null">Sin correos</option')}))},confirmButtonText:"Enviar"}).then((t=>{if(t.isConfirmed){let t=document.getElementById("correo-cliente").value;Swal.fire({timer:3e3,html:'\n                <div class="container">\n                <div class="row justify-content-center">\n                    <dotlottie-player src="https://assets7.lottiefiles.com/packages/lf20_xumyfzqp.json" background="transparent"  speed="1"  style="width: 150px; height: 150px;" loop autoplay></dotlottie-player></br>\n                </div>\n                <span>Enviando correo...</span>\n                </div>\n                ',showConfirmButton:!1}).then((()=>{var a={id_doc:e,prefix:"CONTRATO",path:"../../static/docs/C"+o};fetch("../servidor/database/validar-documentos.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((a=>{a.estatus?$.ajax({type:"POST",url:"../servidor/correo/enviar-correo.php?folio="+e,data:{nombre_cliente:r,correo_cliente:t,cliente_id:o,abono_id:e},dataType:"JSON",success:function(e){0==e.estatus?Swal.fire({icon:"error",html:`<h3>${e.mensaje}</h3>`}):Swal.fire({icon:"success",html:`<h3>${e.mensaje}</h3>`})}}):(guardarContrato(e,n,t,r,o),Swal.fire({icon:"success",html:"<h3>Correo enviado</h3>"}))}))}))}}))}