function Registrar(){let e=document.getElementById("nombre").value,a=document.getElementById("apellido").value,r=document.getElementById("usuario").value,t=document.getElementById("pass").value,o=document.getElementById("sucursal").value,n=document.getElementById("project").value,s=document.getElementById("rol").value;if(validarDatos(e,a,r,t,o,s)){var l=new FormData;l.append("username",e),l.append("lastname",a),l.append("user",r),l.append("pass",t),l.append("store",o),l.append("project",n),l.append("rol",s),$.ajax({type:"POST",url:"../servidor/usuarios/registrar-nuevo.php",processData:!1,contentType:!1,data:l,dataType:"JSON",success:function(e){1==e?Swal.fire({icon:"success",html:"<h3>Usuario registrado</h3>"}):2==e&&(Toast.fire({icon:"error",title:"Ese usuaro ya existe"}),document.getElementById("usuario").classList.add("animate__headShake"),setTimeout((function(){document.getElementById("usuario").classList.remove("animate__headShake")}),700))}})}}function validarDatos(e,a,r,t,o,n){return null==e||null==e||0==e.length||""==e?(animarError("nombre"),!1):null==a||null==a||0==a.length||""==a?(animarError("apellido"),!1):null==r||null==r||0==r.length||""==r?(animarError("usuario"),!1):null==t||null==t||0==t.length||""==t?(animarError("pass"),!1):null==o||null==o||0==o.length||""==o?(animarError("sucursal"),!1):null!=n&&null!=n&&0!=n.length&&""!=n||(animarError("rol"),!1)}function animarError(e){document.getElementById(e).classList.add("animate__headShake"),setTimeout((function(){document.getElementById(e).classList.remove("animate__headShake")}),700),"nombre"==e?Toast.fire({icon:"error",title:"Ingresa un nombre"}):"apellido"==e?Toast.fire({icon:"error",title:"Ingresa una contraseña"}):"usuario"==e?Toast.fire({icon:"error",title:"Ingresa un usuario"}):"pass"==e?Toast.fire({icon:"error",title:"Ingresa una contraseña"}):"sucursal"==e?Toast.fire({icon:"error",title:"selecciona una sucursal"}):"rol"==e?Toast.fire({icon:"error",title:"Ingresa un rol"}):Toast.fire({icon:"error",title:"Algo salio mal"})}const Toast=Swal.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});function setearProyecto(){let e=$("#sucursal").val();null!==e?$.ajax({type:"post",url:"../servidor/inventario/traer-datos-en-base-uno.php",data:{id:e,tabla:"proyectos",indicador:"sucursal_id"},dataType:"JSON",success:function(e){let a=$("#project");null!=e.data?(a.empty(),e.data.forEach((e=>{a.append(`<option value="${e.id}">${e.nombre}</option>`)})),a.prop("disabled",!1),a.css("background-color","white")):(a.prop("disabled",!0),a.css("background-color","rgb(231,227,227)"),a.empty().append('\n            <option value="null">No proyectos registrados</option>\n            '))}}):(proyecto.prop("disabled",!0),proyecto.css("background-color","rgb(231,227,227)"))}setearProyecto();