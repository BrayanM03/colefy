import{initCustomDataTable}from"../DataTable/datatables-init.js";let tabla,estatus_tag;function desactivarMateria(a){Swal.fire({icon:"question",title:"Â¿Deseas desactivar esta materia?",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Si",showCloseButton:!0}).then((t=>{t.isConfirmed&&$.ajax({type:"POST",url:BASE_URL+"servidor/historial/eliminar-registro.php",data:{id_reg:a,tabla:"materias"},dataType:"JSON",success:function(a){1==a.estatus?Swal.fire({icon:"success",html:`\n                      ${a.mensaje}<br>\n                      `,allowOutsideClick:!0,confirmButtonText:"Entendido",showCancelButton:!1}).then((a=>{a.isConfirmed&&tabla.ajax.reload(!1)})):Swal.fire({icon:"error",html:`\n                      Ocurrio un error: ${a.mensaje}\n                      `,allowOutsideClick:!0,showCancelButton:!1,confirmButtonText:"Entendido"}).then((a=>{a.isConfirmed&&tabla.ajax.reload(!1)}))}})}))}function editarMateria(a){$.ajax({type:"post",url:BASE_URL+"servidor/materias/obtener-info-materia.php",data:{id_materia:a},dataType:"json",success:function(t){t.estatus&&Swal.fire({html:`\n                <div class="container">\n                   <div class="row mb-3">\n                      <div class="col-md-6 col-12">\n                          <label>Nombre</label>\n                          <input class="form-control" type="text" id="materia" value="${t.datos.nombre}" placeholder="Materia"/>\n                      </div>\n                      <div class="col-md-6 col-12">\n                          <label>Codigo</label>\n                          <input class="form-control" type="text" id="codigo" value="${t.datos.codigo}" placeholder="Codigo"/>\n                      </div>\n                   </div>\n                   <div class="row mb-3">\n                      <div class="col-md-6 col-12">\n                          <label>Valor creditos</label>\n                          <input class="form-control" type="number" value="${t.datos.valor_creditos}" id="valor_credito" placeholder="0"/>\n                      </div>\n                   </div>\n                </div>\n            `,showCloseButton:!0,confirmButtonText:"Actualizar"}).then((t=>{if(t.isConfirmed){let t=document.getElementById("materia").value,e=document.getElementById("codigo").value,o=document.getElementById("valor_credito").value;$.ajax({type:"post",url:BASE_URL+"servidor/materias/actualizar.php",data:{id_materia:a,nombre:t,codigo:e,valor_credito:o},dataType:"json",success:function(a){a.estatus?Swal.fire({icon:"success",title:a.mensaje}):Swal.fire({icon:"error",title:a.mensaje}),tabla.ajax.reload(null,!1)}})}}))}})}$(document).ready((function(){$("#role").attr("role");tabla=initCustomDataTable("#example",BASE_URL+"api/materias.php",[{data:"id",title:"#"},{data:"nombre",title:"Nombre"},{data:"codigo",title:"Codigo"},{data:null,title:"Estatus",render:a=>(estatus_tag=1==a.estatus||2==a.estatus?'<span class="badge bg-success">Activo</span>':'<span class="badge bg-secondary">Inactivo</span>',estatus_tag)},{data:null,title:"Opciones",render:function(a,t,e){return""}}])}));