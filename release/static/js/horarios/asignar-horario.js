$(document).ready((function(){reloadTable()}));import{initCustomDataTable}from"../DataTable/datatables-init.js";import{DataTableListener,GeneralEventListener}from"../utils/listeners.js";let table;const Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.onmouseenter=Swal.stopTimer,a.onmouseleave=Swal.resumeTimer}});function reloadTable(){$("#role").attr("role");table=initCustomDataTable("#grupos-horarios",BASE_URL+"api/horarios.php?tipo=tabla_grupos_horario",[{data:"id",title:"#"},{data:"grupo",title:"Grupo"},{data:"horario",title:"Horario"},{data:null,render:function(a){return"\n          <div class='row'>\n                      <div class='col-12 col-md-12'> \n                         <div class=\"btn btn-danger btn-cancelar-asignacion\"><i class=\"fa-solid fa-trash\"></i></div>\n                      </div>\n                  </div>\n          "}}]),DataTableListener(table,"click",".btn-cancelar-asignacion",cancelarAsignacion)}function asingarHorario(){let a=$("#grupo").val(),o=$("#horario").val();$.ajax({type:"post",url:BASE_URL+"api/horarios.php?tipo=insertar_grupos_horario",data:{ids_grupos:a,id_horario:o},dataType:"json",success:function(a){table.ajax.reload(null,!1),a.estatus?Swal.fire({icon:"success",title:a.mensaje,confirmButtonText:"Entendido"}).then((()=>{window.location.reload()})):Swal.fire({icon:"error",title:a.mensaje,confirmButtonText:"Entendido"}).then((()=>{window.location.reload()}))}})}function cancelarAsignacion(a){Swal.fire({icon:"question",title:"¿Deseas eliminar esta asignación?",showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Si",showCloseButton:!0}).then((o=>{o.isConfirmed&&$.ajax({type:"post",url:BASE_URL+"api/horarios.php?tipo=eliminar_grupos_horario",data:{id:a},dataType:"json",success:function(a){table.ajax.reload(null,!1),a.estatus?Swal.fire({icon:"success",title:a.mensaje,confirmButtonText:"Entendido"}).then((()=>{window.location.reload()})):Swal.fire({icon:"error",title:a.mensaje,confirmButtonText:"Entendido"}).then((()=>{window.location.reload()}))}})}))}GeneralEventListener("bnt-asignar-horario","click",asingarHorario);