function corteSwal(){Swal.fire({icon:"question",didOpen:function(){$.ajax({type:"post",url:"../servidor/panel/traer-proyectos.php",data:"data",dataType:"json",success:function(e){e.estatus&&($("#proyecto_id").empty(),$("#proyecto_id").append('<option value="all">Todos los proyectos</option>'),e.datos.forEach((e=>{$("#proyecto_id").append(`\n                                <option value="${e.id}">${e.nombre}</option>\n                                `)})))}});var e=new Date;$("#fecha-corte").val(e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+e.getDate());let a=$("#tipo-corte");a.change((function(e){switch(e.preventDefault(),a.val()){case"normal":$("#area-fechas").empty().append('\n                        <div class="col-12 col-md-6">\n                        <label>Fecha</label>\n                                <input id="fecha-corte" type="date" class="form-field mt-1">\n                        </div>\n                        ');break;case"range":$("#area-fechas").empty().append('\n                        <div class="col-12 col-md-6">\n                        <label>Fecha incial</label>\n                            <input id="fecha-inicial" type="date" class="form-field mt-1">\n                        </div>\n                        <div class="col-12 col-md-6">\n                        <label>Fecha final</label>\n                            <input id="fecha-final" type="date" class="form-field mt-1">\n                        </div>\n                        ')}}))},html:'\n            <div class="container">\n              <div class="row justify-content-center">\n                    <div class="col-12 col-md-6">\n                        <label>Proyectos</label>\n                        <select id="proyecto_id" class="form-field mt-1">\n                        </select>\n                    </div>\n                    <div class="col-12 col-md-6">\n                        <label>Tipo de corte</label>\n                        <select id="tipo-corte" class="form-field mt-1">\n                            <option value="normal">Normal</option>\n                            <option value="range">Rango de fechas</option>\n                        </select>\n                  </div>\n              </div>\n\n                  <div class="row mt-3 justify-content-center" id="area-fechas">\n                  <div class="col-12 col-md-6">\n                        <label>Fecha</label>\n                        <input id="fecha-corte" type="date" class="form-field mt-1">\n                  </div>\n              \n              </div>\n            \n            </div>\n        ',confirmButtonText:"Descargar",showCancelButton:!0,cancelButtonText:"Cancelar",preConfirm:function(){""==$("#fecha-corte").val()&&Swal.showValidationMessage("Selecciona una fecha")}}).then((e=>{e.isConfirmed&&realizarCorte()}))}function realizarCorte(){let e=$("#proyecto_id").val(),a=$("#tipo-corte").val(),t=$("#sucursal").val();if("normal"==a){let o=$("#fecha-corte").val();data={sucursal:t,tipo_corte:a,fecha:o},ruta="../servidor/reportes/realizar-corte.php?fecha="+o+"&tipo_corte="+a+"&sucursal="+t+"&proyecto="+e}else{let o=$("#fecha-inicial").val(),l=$("#fecha-final").val();data={tipo_corte:a,sucursal:t,fecha_inicial:o,fecha_final:l},ruta="../servidor/reportes/realizar-corte.php?fecha_inicial="+o+"&fecha_final="+l+"&tipo_corte="+a+"&sucursal="+t+"&proyecto="+e}window.open(ruta,"_blank")}